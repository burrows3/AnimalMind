<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Animal Mind – Autonomous AI Research Network | ChatVet</title>
  <meta name="description" content="AI agents run autonomously to collect surveillance, literature, and animal health data. Built by ChatVet.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,600;0,9..40,700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'DM Sans', system-ui, -apple-system, sans-serif;
      background: #0a0e17;
      color: #e8eef4;
      min-height: 100vh;
      line-height: 1.6;
    }
    .page { max-width: 64rem; margin: 0 auto; padding: 2rem 1.5rem; }
    /* Top bar */
    .top-bar { display: flex; justify-content: space-between; align-items: center; padding-bottom: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.08); margin-bottom: 2rem; }
    .logo { font-weight: 700; font-size: 1.25rem; color: #fff; }
    .badge { font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: #7dd3fc; background: rgba(125,211,252,0.12); padding: 0.35rem 0.65rem; border-radius: 6px; }
    /* Hero */
    .hero { text-align: center; padding: 2.5rem 0 2rem; }
    .hero h1 { font-size: clamp(2rem, 5vw, 2.75rem); font-weight: 700; margin: 0 0 0.5rem; letter-spacing: -0.03em; color: #fff; }
    .hero .tagline { font-size: 1.1rem; opacity: 0.9; max-width: 32rem; margin: 0 auto 0.5rem; }
    .hero .autonomous { font-size: 0.95rem; color: #7dd3fc; margin-bottom: 1.5rem; font-weight: 600; }
    .cta {
      display: inline-block;
      background: #fff;
      color: #0f3460;
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
      transition: transform 0.12s, box-shadow 0.12s;
    }
    .cta:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
    /* Data section */
    .section { margin-top: 2.5rem; }
    .section-title { font-size: 1rem; font-weight: 600; color: #fff; margin: 0 0 1rem; letter-spacing: -0.01em; }
    .data-section { background: linear-gradient(145deg, rgba(15,52,96,0.35) 0%, rgba(22,33,62,0.4) 100%); border-radius: 12px; padding: 1.75rem; border: 1px solid rgba(255,255,255,0.1); }
    .data-cards { display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; margin-bottom: 0.75rem; }
    @media (max-width: 640px) { .data-cards { grid-template-columns: repeat(2, 1fr); } }
    .data-card {
      background: rgba(255,255,255,0.06);
      border-radius: 10px;
      padding: 1.1rem 1rem;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.08);
    }
    .data-card .num { font-size: 1.65rem; font-weight: 700; color: #a0c4ff; display: block; line-height: 1.2; }
    .data-card .label { font-size: 0.78rem; opacity: 0.88; margin-top: 0.35rem; }
    .data-meta { font-size: 0.8rem; opacity: 0.65; margin-top: 0.5rem; }
    .data-section .msg { opacity: 0.8; font-size: 0.9rem; }
    /* How it works */
    .how-section { margin-top: 2rem; }
    .how-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-top: 0.5rem; }
    .how-item { background: rgba(255,255,255,0.04); border-radius: 8px; padding: 1rem; font-size: 0.88rem; border-left: 3px solid rgba(125,211,252,0.5); }
    .how-item strong { color: #e8eef4; }
    /* Browse data / memory */
    .memory-section { margin-top: 2.5rem; }
    .memory-toggle { display: inline-block; background: rgba(125,211,252,0.2); color: #7dd3fc; border: 1px solid rgba(125,211,252,0.4); padding: 0.6rem 1.2rem; border-radius: 8px; font-weight: 600; font-size: 0.9rem; cursor: pointer; margin-bottom: 1rem; }
    .memory-toggle:hover { background: rgba(125,211,252,0.25); }
    .memory-panel { background: rgba(0,0,0,0.2); border-radius: 12px; padding: 1.25rem; border: 1px solid rgba(255,255,255,0.1); margin-top: 0.5rem; max-height: 70vh; overflow-y: auto; }
    .memory-panel .loading, .memory-panel .error { opacity: 0.85; font-size: 0.9rem; }
    .memory-group { margin-bottom: 1.25rem; }
    .memory-group:last-child { margin-bottom: 0; }
    .memory-group-title { font-size: 0.85rem; font-weight: 600; color: #a0c4ff; margin-bottom: 0.5rem; text-transform: capitalize; }
    .memory-list { list-style: none; margin: 0; padding: 0; }
    .memory-list li { margin: 0.35rem 0; font-size: 0.88rem; }
    .memory-list a { color: #e8eef4; text-decoration: none; border-bottom: 1px solid rgba(255,255,255,0.15); }
    .memory-list a:hover { color: #7dd3fc; border-bottom-color: #7dd3fc; }
    .memory-list .condition { font-size: 0.78rem; opacity: 0.75; margin-top: 0.15rem; }
    /* Footer */
    .foot { margin-top: 2.5rem; text-align: center; font-size: 0.82rem; opacity: 0.6; }
    .foot a { color: #7dd3fc; text-decoration: none; }
    .foot a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="page">
    <header class="top-bar">
      <span class="logo">Animal Mind</span>
      <span class="badge">Autonomous AI agents</span>
    </header>

    <section class="hero">
      <h1>Animal Research Network</h1>
      <p class="tagline">Surveillance, literature, and insights for animal health — collected and updated by AI agents running on a schedule.</p>
      <p class="autonomous">AI agents run autonomously every 6 hours: ingest, analyze, and push data to this page.</p>
      <a href="https://github.com/burrows3/AnimalMind" class="cta">View on GitHub</a>
    </section>

    <section class="data-section section" aria-labelledby="data-heading">
      <h2 id="data-heading" class="section-title">Live data (from autonomous ingest)</h2>
      <div id="data-cards" class="data-cards">
        <span class="msg">Loading…</span>
      </div>
      <p id="data-meta" class="data-meta"></p>
    </section>

    <section class="how-section section" aria-labelledby="how-heading">
      <h2 id="how-heading" class="section-title">What the agents track</h2>
      <div class="how-grid">
        <div class="how-item"><strong>Surveillance</strong> — CDC travel notices</div>
        <div class="how-item"><strong>Literature</strong> — PubMed</div>
        <div class="how-item"><strong>Cancer</strong> — Animal / veterinary oncology</div>
        <div class="how-item"><strong>Case data</strong> — Veterinary case reports</div>
        <div class="how-item"><strong>Imaging</strong> — TCIA, radiographs</div>
      </div>
    </section>

    <section class="memory-section section" aria-labelledby="memory-heading">
      <h2 id="memory-heading" class="section-title">Browse data (agent memory)</h2>
      <p style="font-size:0.9rem; opacity:0.85; margin-bottom:0.75rem;">Click to open the latest items ingested by the autonomous agents. Links open the source (CDC, PubMed, etc.).</p>
      <button type="button" class="memory-toggle" id="memory-toggle" aria-expanded="false" aria-controls="memory-panel">Show data</button>
      <div id="memory-panel" class="memory-panel" hidden aria-live="polite"></div>
    </section>

    <p class="foot">Built by ChatVet. Research engine for veterinarians and partners. Data refreshed every 6 hours by autonomous agents.</p>
  </div>
  <script id="data-summary-inline">window.__DATA_SUMMARY__ = {"lastUpdated":"2026-02-01T17:00:05.363Z","counts":{"surveillance":18,"literature":15,"cancer":16,"case_data":15,"imaging":3}};</script>
  <script>
    (function () {
      var labels = { surveillance: 'Surveillance', literature: 'Literature', cancer: 'Cancer', case_data: 'Case reports', imaging: 'Imaging' };
      var order = ['surveillance', 'literature', 'cancer', 'case_data', 'imaging'];

      function render(data) {
        var container = document.getElementById('data-cards');
        var metaEl = document.getElementById('data-meta');
        if (!data || !data.counts) {
          container.innerHTML = '<span class="msg">Data will appear after the next autonomous ingest and push to GitHub.</span>';
          return;
        }
        container.innerHTML = order.map(function (key) {
          var count = data.counts[key] != null ? data.counts[key] : 0;
          var label = labels[key] || key;
          return '<div class="data-card"><span class="num">' + count + '</span><span class="label">' + label + '</span></div>';
        }).join('');
        if (data.lastUpdated) {
          var d = new Date(data.lastUpdated);
          metaEl.textContent = 'Last updated by agents: ' + d.toLocaleString();
        }
      }

      // Inline fallback (written by push script so data always shows)
      if (window.__DATA_SUMMARY__) {
        render(window.__DATA_SUMMARY__);
        return;
      }

      // Fetch from same origin (works on custom domain and GitHub Pages)
      var url = new URL('data-summary.json', document.location.href).href;
      fetch(url, { cache: 'no-store' })
        .then(function (r) { return r.ok ? r.json() : null; })
        .then(function (data) {
          render(data);
        })
        .catch(function () {
          render(null);
        });
    })();

    (function () {
      var btn = document.getElementById('memory-toggle');
      var panel = document.getElementById('memory-panel');
      var labels = { surveillance: 'Surveillance', literature: 'Literature', cancer: 'Cancer', case_data: 'Case reports', imaging: 'Imaging' };
      var order = ['surveillance', 'literature', 'cancer', 'case_data', 'imaging'];

      function groupByType(rows) {
        var by = {};
        rows.forEach(function (r) {
          if (!by[r.data_type]) by[r.data_type] = [];
          by[r.data_type].push(r);
        });
        return by;
      }

      function escapeHtml(s) {
        if (!s) return '';
        var d = document.createElement('div');
        d.textContent = s;
        return d.innerHTML;
      }

      function renderMemory(data) {
        if (!data || !Array.isArray(data) || data.length === 0) {
          panel.innerHTML = '<p class="loading">No data yet. Run ingest and push to GitHub.</p>';
          return;
        }
        var by = groupByType(data);
        panel.innerHTML = order.map(function (type) {
          var items = by[type] || [];
          if (items.length === 0) return '';
          var label = labels[type] || type;
          var list = items.map(function (item) {
            var title = escapeHtml(item.title || 'Untitled');
            var url = item.url ? escapeHtml(item.url) : '#';
            var condition = item.condition_or_topic ? escapeHtml(item.condition_or_topic) : '';
            var link = url && url !== '#' ? '<a href="' + url + '" target="_blank" rel="noopener">' + title + '</a>' : '<span>' + title + '</span>';
            var condHtml = condition ? '<div class="condition">' + condition + '</div>' : '';
            return '<li>' + link + condHtml + '</li>';
          }).join('');
          return '<div class="memory-group"><div class="memory-group-title">' + label + ' (' + items.length + ')</div><ul class="memory-list">' + list + '</ul></div>';
        }).join('');
      }

      btn.addEventListener('click', function () {
        if (panel.hidden) {
          panel.hidden = false;
          btn.textContent = 'Hide data';
          if (!panel.innerHTML || panel.querySelector('.loading') || panel.querySelector('.error')) {
            panel.innerHTML = '<p class="loading">Loading…</p>';
            var url = new URL('data/ingested.json', document.location.href).href;
            fetch(url, { cache: 'no-store' })
              .then(function (r) { return r.ok ? r.json() : null; })
              .then(function (data) {
                renderMemory(data);
              })
              .catch(function () {
                panel.innerHTML = '<p class="error">Could not load data. Try again after the next ingest and push.</p>';
              });
          }
        } else {
          panel.hidden = true;
          btn.textContent = 'Show data';
        }
      });
    })();
  </script>
</body>
</html>
